<x-app-layout>
    {{-- Compact Header with Quick Actions --}}
    <x-slot name="header">
        <div class="flex justify-between items-center px-6 py-4" x-data>
            <div>
                <h2 class="text-2xl font-bold text-slate-900">
                    {{date('H') < 12 ? 'Bună dimineața' : (date('H') < 18 ? 'Bună ziua' : 'Bună seara')}}, {{ auth()->user()->name }}
                </h2>
                <p class="mt-1 text-sm text-slate-600">Iată ce se întâmplă cu afacerea ta astăzi.</p>
            </div>
            <div class="flex items-center gap-2">
                {{-- Client (Blue - stands out) --}}
                <button
                    type="button"
                    @click="$dispatch('open-slide-panel', 'client-create')"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Client
                </button>
                {{-- Venit (Green - stands out) --}}
                <button
                    type="button"
                    @click="$dispatch('open-slide-panel', 'revenue-create')"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Venit
                </button>
                {{-- Cheltuiala (Red - stands out) --}}
                <button
                    type="button"
                    @click="$dispatch('open-slide-panel', 'expense-create')"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-rose-600 hover:bg-rose-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Cheltuială
                </button>
                {{-- Abonament (Light neutral) --}}
                <button
                    type="button"
                    @click="$dispatch('open-slide-panel', 'subscription-create')"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-slate-50 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg transition-colors shadow-sm"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Abonament
                </button>
                {{-- Acces (Light neutral) --}}
                <button
                    type="button"
                    @click="$dispatch('open-slide-panel', 'credential-create')"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-slate-50 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg transition-colors shadow-sm"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1721 9z"/>
                    </svg>
                    Acces
                </button>
                {{-- Domeniu (Light neutral) --}}
                <button
                    type="button"
                    @click="$dispatch('open-slide-panel', 'domain-create')"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-slate-50 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg transition-colors shadow-sm"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Domeniu
                </button>
            </div>
        </div>
    </x-slot>

    <div class="p-6 space-y-6" x-data>
        {{-- Key Metrics Row --}}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            {{-- Total Clients --}}
            <x-ui.card class="hover:shadow-md transition-shadow cursor-pointer" onclick="window.location.href='{{ route('clients.index') }}'">
                <x-ui.card-content class="p-5">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <p class="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1">Clienți activi</p>
                            <p class="text-2xl font-bold text-slate-900">{{ $activeClients }}</p>
                            <p class="text-xs text-slate-500 mt-1">din {{ $totalClients }} total</p>
                        </div>
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                            </svg>
                        </div>
                    </div>
                </x-ui.card-content>
            </x-ui.card>

            {{-- Active Subscriptions --}}
            <x-ui.card class="hover:shadow-md transition-shadow cursor-pointer" onclick="window.location.href='{{ route('subscriptions.index') }}'">
                <x-ui.card-content class="p-5">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <p class="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1">Abonamente</p>
                            <p class="text-2xl font-bold text-slate-900">{{ $activeSubscriptions }}</p>
                            <p class="text-xs text-green-600 font-medium mt-1">{{ number_format($monthlySubscriptionCost, 2) }} RON/lună</p>
                        </div>
                        <div class="flex-shrink-0 w-10 h-10 bg-green-50 text-green-600 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
                            </svg>
                        </div>
                    </div>
                </x-ui.card-content>
            </x-ui.card>

            {{-- Domains --}}
            <x-ui.card class="hover:shadow-md transition-shadow cursor-pointer" onclick="window.location.href='{{ route('domains.index') }}'">
                <x-ui.card-content class="p-5">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <p class="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1">Domenii</p>
                            <p class="text-2xl font-bold text-slate-900">{{ $activeDomains }}</p>
                            @if($expiringDomains->count() > 0)
                                <p class="text-xs text-orange-600 font-medium mt-1">{{ $expiringDomains->count() }} expiră în 30 zile</p>
                            @else
                                <p class="text-xs text-slate-500 mt-1">Toate sunt valide</p>
                            @endif
                        </div>
                        <div class="flex-shrink-0 w-10 h-10 bg-purple-50 text-purple-600 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
                            </svg>
                        </div>
                    </div>
                </x-ui.card-content>
            </x-ui.card>

            {{-- Credentials --}}
            <x-ui.card class="hover:shadow-md transition-shadow cursor-pointer" onclick="window.location.href='{{ route('credentials.index') }}'">
                <x-ui.card-content class="p-5">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <p class="text-xs font-medium text-slate-500 uppercase tracking-wide mb-1">Acces & parole</p>
                            <p class="text-2xl font-bold text-slate-900">{{ $totalCredentials }}</p>
                            <p class="text-xs text-slate-500 mt-1">credențiale salvate</p>
                        </div>
                        <div class="flex-shrink-0 w-10 h-10 bg-indigo-50 text-indigo-600 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
                            </svg>
                        </div>
                    </div>
                </x-ui.card-content>
            </x-ui.card>
        </div>

        {{-- Financial Overview --}}
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
            {{-- Monthly Revenue --}}
            <x-ui.card class="bg-gradient-to-br from-green-500 to-emerald-600 text-white hover:shadow-lg transition-shadow">
                <x-ui.card-content class="p-5">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <p class="text-xs font-medium text-green-100 uppercase tracking-wide mb-1">Venituri luna curentă</p>
                            <p class="text-2xl font-bold">{{ number_format($currentMonthRevenue, 2) }} RON</p>
                        </div>
                        <div class="flex-shrink-0 w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <p class="text-xs text-green-100">Total anual: {{ number_format($yearlyRevenue, 2) }} RON</p>
                        <a href="{{ route('financial.revenues.index') }}" class="text-xs text-white hover:text-green-100 font-medium flex items-center gap-1 transition-colors">
                            Vezi detalii
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </a>
                    </div>
                </x-ui.card-content>
            </x-ui.card>

            {{-- Monthly Expenses --}}
            <x-ui.card class="bg-gradient-to-br from-red-500 to-rose-600 text-white hover:shadow-lg transition-shadow">
                <x-ui.card-content class="p-5">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <p class="text-xs font-medium text-red-100 uppercase tracking-wide mb-1">Cheltuieli luna curentă</p>
                            <p class="text-2xl font-bold">{{ number_format($currentMonthExpenses, 2) }} RON</p>
                        </div>
                        <div class="flex-shrink-0 w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <p class="text-xs text-red-100">Total anual: {{ number_format($yearlyExpenses, 2) }} RON</p>
                        <a href="{{ route('financial.expenses.index') }}" class="text-xs text-white hover:text-red-100 font-medium flex items-center gap-1 transition-colors">
                            Vezi detalii
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </a>
                    </div>
                </x-ui.card-content>
            </x-ui.card>

            {{-- Net Profit --}}
            <x-ui.card class="bg-gradient-to-br from-slate-700 to-slate-900 text-white hover:shadow-lg transition-shadow">
                <x-ui.card-content class="p-5">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <p class="text-xs font-medium text-slate-300 uppercase tracking-wide mb-1">Profit net luna curentă</p>
                            <p class="text-2xl font-bold">{{ number_format($currentMonthProfit, 2) }} RON</p>
                        </div>
                        <div class="flex-shrink-0 w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                            </svg>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <p class="text-xs text-slate-300">Total anual: {{ number_format($yearlyProfit, 2) }} RON</p>
                        <a href="{{ route('financial.dashboard') }}" class="text-xs text-white hover:text-slate-300 font-medium flex items-center gap-1 transition-colors">
                            Vezi detalii
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </a>
                    </div>
                </x-ui.card-content>
            </x-ui.card>
        </div>

        {{-- Main Content Grid --}}
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            {{-- Left Column: Recent Activity & Top Clients --}}
            <div class="lg:col-span-2 space-y-6">
                {{-- Revenue/Expense Trend Chart --}}
                <x-ui.card>
                    <x-ui.card-header>
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold text-slate-900">Tendință lunară</h3>
                            <div class="flex items-center gap-4 text-xs">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span class="text-slate-600">Venituri</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <span class="text-slate-600">Cheltuieli</span>
                                </div>
                            </div>
                        </div>
                    </x-ui.card-header>
                    <x-ui.card-content>
                        <div class="h-64 flex items-end justify-between gap-2">
                            @foreach($revenueTrend as $index => $month)
                                <div class="flex-1 flex flex-col items-center gap-2">
                                    <div class="w-full flex flex-col gap-1 items-center">
                                        @php
                                            $maxAmount = max(array_column($revenueTrend, 'amount'));
                                            $maxExpense = max(array_column($expenseTrend, 'amount'));
                                            $overallMax = max($maxAmount, $maxExpense, 1);
                                            $revenueHeight = ($month['amount'] / $overallMax) * 100;
                                            $expenseHeight = ($expenseTrend[$index]['amount'] / $overallMax) * 100;
                                        @endphp
                                        <div class="w-full bg-green-500 rounded-t transition-all hover:bg-green-600"
                                             style="height: {{ $revenueHeight }}%"
                                             title="Venituri: {{ $month['formatted'] }}">
                                        </div>
                                        <div class="w-full bg-red-500 rounded-t transition-all hover:bg-red-600"
                                             style="height: {{ $expenseHeight }}%"
                                             title="Cheltuieli: {{ $expenseTrend[$index]['formatted'] }}">
                                        </div>
                                    </div>
                                    <span class="text-xs text-slate-600 font-medium">{{ $month['month'] }}</span>
                                </div>
                            @endforeach
                        </div>
                    </x-ui.card-content>
                </x-ui.card>

                {{-- Top Clients --}}
                <x-ui.card>
                    <x-ui.card-header>
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold text-slate-900">Top clienți</h3>
                            <a href="{{ route('clients.index') }}" class="text-sm text-slate-600 hover:text-slate-900 font-medium transition-colors">Vezi toți →</a>
                        </div>
                    </x-ui.card-header>
                    <x-ui.card-content>
                        @if($topClients->count() > 0)
                            <div class="space-y-3">
                                @foreach($topClients as $index => $client)
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors">
                                        <div class="flex items-center gap-3">
                                            <div class="flex-shrink-0 w-8 h-8 bg-slate-900 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                                {{ $index + 1 }}
                                            </div>
                                            <div>
                                                <p class="font-medium text-slate-900">{{ $client->display_name }}</p>
                                                <p class="text-xs text-slate-500">{{ $client->email ?? 'Fără email' }}</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="font-semibold text-slate-900">{{ number_format($client->total_revenue, 2) }} RON</p>
                                            <p class="text-xs text-slate-500">venituri totale</p>
                                        </div>
                                    </div>
                                @endforeach
                            </div>
                        @else
                            <p class="text-sm text-slate-500 text-center py-8">Niciun client cu venituri înregistrate</p>
                        @endif
                    </x-ui.card-content>
                </x-ui.card>
            </div>

            {{-- Right Column: Renewals & Alerts --}}
            <div class="space-y-6">
                {{-- Expiring Domains --}}
                @if($expiringDomains->count() > 0)
                    <x-ui.card class="border-orange-200 bg-orange-50">
                        <x-ui.card-header>
                            <div class="flex items-center gap-2">
                                <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                </svg>
                                <h3 class="text-base font-semibold text-orange-900">Domenii expiră în curând</h3>
                            </div>
                        </x-ui.card-header>
                        <x-ui.card-content>
                            <div class="space-y-2">
                                @foreach($expiringDomains->take(5) as $domain)
                                    <div class="flex items-start justify-between p-3 bg-white rounded-lg hover:shadow-sm transition-shadow cursor-pointer"
                                         @click="$dispatch('open-slide-panel', 'domain-edit-{{$domain->id}}')">
                                        <div class="flex-1 min-w-0">
                                            <p class="font-medium text-slate-900 truncate">{{ $domain->domain_name }}</p>
                                            <p class="text-xs text-slate-500">
                                                {{ $domain->client ? $domain->client->display_name : 'Fără client' }}
                                            </p>
                                        </div>
                                        <div class="text-right flex-shrink-0 ml-2">
                                            <p class="text-xs font-semibold text-orange-700">
                                                {{ $domain->expiry_date->diffInDays(now()) }} zile
                                            </p>
                                            <p class="text-xs text-slate-500">{{ $domain->expiry_date->format('d.m.Y') }}</p>
                                        </div>
                                    </div>
                                @endforeach
                            </div>
                            @if($expiringDomains->count() > 5)
                                <a href="{{ route('domains.index') }}" class="block mt-3 text-center text-sm text-orange-700 hover:text-orange-900 font-medium">
                                    +{{ $expiringDomains->count() - 5 }} mai multe domenii
                                </a>
                            @endif
                        </x-ui.card-content>
                    </x-ui.card>
                @endif

                {{-- Overdue Subscriptions --}}
                @if($overdueSubscriptions->count() > 0)
                    <x-ui.card class="border-red-200 bg-red-50">
                        <x-ui.card-header>
                            <div class="flex items-center gap-2">
                                <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <h3 class="text-base font-semibold text-red-900">Abonamente restante</h3>
                            </div>
                        </x-ui.card-header>
                        <x-ui.card-content>
                            <div class="space-y-2">
                                @foreach($overdueSubscriptions->take(5) as $subscription)
                                    <div class="flex items-start justify-between p-3 bg-white rounded-lg hover:shadow-sm transition-shadow cursor-pointer"
                                         @click="$dispatch('open-slide-panel', 'subscription-edit-{{$subscription->id}}')">
                                        <div class="flex-1 min-w-0">
                                            <p class="font-medium text-slate-900 truncate">{{ $subscription->vendor_name }}</p>
                                            <p class="text-xs text-slate-500">{{ number_format($subscription->price, 2) }} RON</p>
                                        </div>
                                        <div class="text-right flex-shrink-0 ml-2">
                                            <p class="text-xs font-semibold text-red-700">
                                                Restant {{ abs($subscription->next_renewal_date->diffInDays(now())) }} zile
                                            </p>
                                            <p class="text-xs text-slate-500">{{ $subscription->next_renewal_date->format('d.m.Y') }}</p>
                                        </div>
                                    </div>
                                @endforeach
                            </div>
                        </x-ui.card-content>
                    </x-ui.card>
                @endif

                {{-- Upcoming Renewals --}}
                @if($upcomingRenewals['subscriptions']->count() > 0)
                    <x-ui.card>
                        <x-ui.card-header>
                            <div class="flex items-center gap-2">
                                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <h3 class="text-base font-semibold text-slate-900">Reînnoiri următoare</h3>
                            </div>
                        </x-ui.card-header>
                        <x-ui.card-content>
                            <div class="space-y-2">
                                @foreach($upcomingRenewals['subscriptions']->take(5) as $subscription)
                                    <div class="flex items-start justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors">
                                        <div class="flex-1 min-w-0">
                                            <p class="font-medium text-slate-900 truncate">{{ $subscription->vendor_name }}</p>
                                            <p class="text-xs text-slate-500">{{ number_format($subscription->price, 2) }} RON / {{ $subscription->billing_cycle }}</p>
                                        </div>
                                        <div class="text-right flex-shrink-0 ml-2">
                                            <p class="text-xs font-semibold text-blue-700">
                                                {{ $subscription->next_renewal_date->diffInDays(now()) }} zile
                                            </p>
                                            <p class="text-xs text-slate-500">{{ $subscription->next_renewal_date->format('d.m.Y') }}</p>
                                        </div>
                                    </div>
                                @endforeach
                            </div>
                        </x-ui.card-content>
                    </x-ui.card>
                @endif

                {{-- Recent Clients --}}
                <x-ui.card>
                    <x-ui.card-header>
                        <div class="flex items-center justify-between">
                            <h3 class="text-base font-semibold text-slate-900">Clienți recenți</h3>
                            <a href="{{ route('clients.index') }}" class="text-sm text-slate-600 hover:text-slate-900 font-medium transition-colors">Vezi toți →</a>
                        </div>
                    </x-ui.card-header>
                    <x-ui.card-content>
                        @if($recentClients->count() > 0)
                            <div class="space-y-2">
                                @foreach($recentClients as $client)
                                    <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer"
                                         onclick="window.location.href='{{ route('clients.show', $client) }}'">
                                        <div class="flex-shrink-0 w-10 h-10 bg-slate-900 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                            {{ strtoupper(substr($client->display_name, 0, 2)) }}
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="font-medium text-slate-900 truncate">{{ $client->display_name }}</p>
                                            <p class="text-xs text-slate-500">{{ $client->email ?? 'Fără email' }}</p>
                                        </div>
                                        @if($client->status)
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                {{ $client->status->status_name }}
                                            </span>
                                        @endif
                                    </div>
                                @endforeach
                            </div>
                        @else
                            <p class="text-sm text-slate-500 text-center py-8">Niciun client înregistrat</p>
                        @endif
                    </x-ui.card-content>
                </x-ui.card>
            </div>
        </div>
    </div>

    {{-- Toast Notifications --}}
    <x-toast />

    {{-- Client Create Slide Panel --}}
    <x-slide-panel name="client-create" :show="false" maxWidth="2xl">
        <div class="flex items-center justify-between px-8 py-6 border-b border-slate-200">
            <h2 class="text-2xl font-bold text-slate-900">Adaugă Client Nou</h2>
            <button type="button" @click="$dispatch('close-slide-panel', 'client-create')" class="text-slate-400 hover:text-slate-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto px-8 py-6">
            <x-ajax-form-wrapper
                formId="client-create-form-dashboard"
                :action="route('clients.store')"
                method="POST"
                slidePanel="client-create"
                successMessage="Client created successfully!"
            >
                @php $clientStatuses = \App\Models\ClientSetting::active()->ordered()->get(); @endphp
                <x-client-form-fields :statuses="$clientStatuses" idSuffix="_dash" />
            </x-ajax-form-wrapper>
        </div>
        <div class="flex items-center justify-end gap-x-3 px-8 py-6 border-t border-slate-200 bg-slate-50">
            <x-ui.button type="button" variant="ghost" @click="$dispatch('close-slide-panel','client-create')">Cancel</x-ui.button>
            <x-ui.button type="submit" variant="default" form="client-create-form-dashboard">Creează Client</x-ui.button>
        </div>
    </x-slide-panel>

    {{-- Domain Create Slide Panel --}}
    <x-slide-panel name="domain-create" :show="false" maxWidth="2xl">
        <div class="flex items-center justify-between px-8 py-6 border-b border-slate-200">
            <h2 class="text-2xl font-bold text-slate-900">Adaugă Domeniu Nou</h2>
            <button type="button" @click="$dispatch('close-slide-panel', 'domain-create')" class="text-slate-400 hover:text-slate-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto px-8 py-6">
            <x-ajax-form-wrapper
                formId="domain-create-form-dashboard"
                :action="route('domains.store')"
                method="POST"
                slidePanel="domain-create"
                successMessage="Domain created successfully!"
            >
                <x-domain-form-fields :clients="$clients" idSuffix="_dash" />
            </x-ajax-form-wrapper>
        </div>
        <div class="flex items-center justify-end gap-x-3 px-8 py-6 border-t border-slate-200 bg-slate-50">
            <x-ui.button type="button" variant="ghost" @click="$dispatch('close-slide-panel','domain-create')">Cancel</x-ui.button>
            <x-ui.button type="submit" variant="default" form="domain-create-form-dashboard">Creează Domeniu</x-ui.button>
        </div>
    </x-slide-panel>

    {{-- Subscription Create Slide Panel --}}
    <x-slide-panel name="subscription-create" :show="false" maxWidth="2xl">
        <div class="flex items-center justify-between px-8 py-6 border-b border-slate-200">
            <h2 class="text-2xl font-bold text-slate-900">Abonament Nou</h2>
            <button type="button" @click="$dispatch('close-slide-panel', 'subscription-create')" class="text-slate-400 hover:text-slate-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto px-8 py-6">
            <x-ajax-form-wrapper
                formId="subscription-create-form-dashboard"
                :action="route('subscriptions.store')"
                method="POST"
                slidePanel="subscription-create"
                successMessage="Subscription created successfully!"
            >
                <div x-data="{ billingCycle: 'monthly' }">
                    <x-subscription-form-fields idSuffix="_dash" />
                </div>
            </x-ajax-form-wrapper>
        </div>
        <div class="flex items-center justify-end gap-x-3 px-8 py-6 border-t border-slate-200 bg-slate-50">
            <x-ui.button type="button" variant="ghost" @click="$dispatch('close-slide-panel','subscription-create')">Cancel</x-ui.button>
            <x-ui.button type="submit" variant="default" form="subscription-create-form-dashboard">Creează Abonament</x-ui.button>
        </div>
    </x-slide-panel>

    {{-- Credential Create Slide Panel --}}
    <x-slide-panel name="credential-create" :show="false" maxWidth="2xl">
        <div class="flex items-center justify-between px-8 py-6 border-b border-slate-200">
            <h2 class="text-2xl font-bold text-slate-900">Acces Nou</h2>
            <button type="button" @click="$dispatch('close-slide-panel', 'credential-create')" class="text-slate-400 hover:text-slate-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto px-8 py-6">
            <x-ajax-form-wrapper
                formId="credential-create-form-dashboard"
                :action="route('credentials.store')"
                method="POST"
                slidePanel="credential-create"
                successMessage="Credential created successfully!"
            >
                <div x-data="{ showPass: false }">
                    <x-credential-form-fields :clients="$clients" idSuffix="_dash" />
                </div>
            </x-ajax-form-wrapper>
        </div>
        <div class="flex items-center justify-end gap-x-3 px-8 py-6 border-t border-slate-200 bg-slate-50">
            <x-ui.button type="button" variant="ghost" @click="$dispatch('close-slide-panel','credential-create')">Cancel</x-ui.button>
            <x-ui.button type="submit" variant="default" form="credential-create-form-dashboard">Salvează</x-ui.button>
        </div>
    </x-slide-panel>

    {{-- Edit panels for expiring domains and overdue subscriptions --}}
    @foreach($expiringDomains as $domain)
    <x-slide-panel name="domain-edit-{{$domain->id}}" :show="false" maxWidth="2xl">
        <div class="flex items-center justify-between px-8 py-6 border-b border-slate-200">
            <h2 class="text-2xl font-bold text-slate-900">Editează Domeniu</h2>
            <button type="button" @click="$dispatch('close-slide-panel','domain-edit-{{$domain->id}}')" class="text-slate-400 hover:text-slate-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto px-8 py-6">
            <x-ajax-form-wrapper
                formId="domain-edit-form-{{$domain->id}}"
                :action="route('domains.update', $domain)"
                method="PUT"
                slidePanel="domain-edit-{{$domain->id}}"
                successMessage="Domain updated successfully!"
            >
                <x-domain-form-fields :domain="$domain" :clients="$clients" idSuffix="_edit_{{$domain->id}}" />
            </x-ajax-form-wrapper>
        </div>
        <div class="flex items-center justify-end gap-x-3 px-8 py-6 border-t border-slate-200 bg-slate-50">
            <x-ui.button type="button" variant="ghost" @click="$dispatch('close-slide-panel','domain-edit-{{$domain->id}}')">Cancel</x-ui.button>
            <x-ui.button type="submit" variant="default" form="domain-edit-form-{{$domain->id}}">Actualizează</x-ui.button>
        </div>
    </x-slide-panel>
    @endforeach

    @foreach($overdueSubscriptions as $subscription)
    <x-slide-panel name="subscription-edit-{{$subscription->id}}" :show="false" maxWidth="2xl">
        <div class="flex items-center justify-between px-8 py-6 border-b border-slate-200">
            <h2 class="text-2xl font-bold text-slate-900">Editează Abonament</h2>
            <button type="button" @click="$dispatch('close-slide-panel','subscription-edit-{{$subscription->id}}')" class="text-slate-400 hover:text-slate-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto px-8 py-6">
            <x-ajax-form-wrapper
                formId="subscription-edit-form-{{$subscription->id}}"
                :action="route('subscriptions.update', $subscription)"
                method="PUT"
                slidePanel="subscription-edit-{{$subscription->id}}"
                successMessage="Subscription updated successfully!"
            >
                <div x-data="{ billingCycle: '{{$subscription->billing_cycle}}' }">
                    <x-subscription-form-fields :subscription="$subscription" idSuffix="_edit_{{$subscription->id}}" />
                </div>
            </x-ajax-form-wrapper>
        </div>
        <div class="flex items-center justify-end gap-x-3 px-8 py-6 border-t border-slate-200 bg-slate-50">
            <x-ui.button type="button" variant="ghost" @click="$dispatch('close-slide-panel','subscription-edit-{{$subscription->id}}')">Cancel</x-ui.button>
            <x-ui.button type="submit" variant="default" form="subscription-edit-form-{{$subscription->id}}">Actualizează</x-ui.button>
        </div>
    </x-slide-panel>
    @endforeach

    {{-- Revenue Create Slide Panel --}}
    <x-slide-panel name="revenue-create" :show="false" maxWidth="2xl">
        <div class="flex items-center justify-between px-8 py-6 border-b border-slate-200">
            <h2 class="text-2xl font-bold text-slate-900">Adaugă venit nou</h2>
            <button type="button" @click="$dispatch('close-slide-panel', 'revenue-create')" class="text-slate-400 hover:text-slate-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto px-8 py-6">
            <x-ajax-form-wrapper
                formId="revenue-create-form-dashboard"
                :action="route('financial.revenues.store')"
                method="POST"
                slidePanel="revenue-create"
                successMessage="Revenue created successfully!"
            >
                <x-revenue-form-fields :clients="$clients" idSuffix="_dash" />
            </x-ajax-form-wrapper>
        </div>
        <div class="flex items-center justify-end gap-x-3 px-8 py-6 border-t border-slate-200 bg-slate-50">
            <x-ui.button type="button" variant="ghost" @click="$dispatch('close-slide-panel', 'revenue-create')">Anulează</x-ui.button>
            <x-ui.button type="submit" form="revenue-create-form-dashboard" variant="default">Salvează venit</x-ui.button>
        </div>
    </x-slide-panel>

    {{-- Expense Create Slide Panel --}}
    <x-slide-panel name="expense-create" :show="false" maxWidth="2xl">
        <div class="flex items-center justify-between px-8 py-6 border-b border-slate-200">
            <h2 class="text-2xl font-bold text-slate-900">Adaugă cheltuială nouă</h2>
            <button type="button" @click="$dispatch('close-slide-panel', 'expense-create')" class="text-slate-400 hover:text-slate-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto px-8 py-6">
            <x-ajax-form-wrapper
                formId="expense-create-form-dashboard"
                :action="route('financial.expenses.store')"
                method="POST"
                slidePanel="expense-create"
                successMessage="Expense created successfully!"
            >
                <x-expense-form-fields :categories="$expenseCategories" idSuffix="_dash" />
            </x-ajax-form-wrapper>
        </div>
        <div class="flex items-center justify-end gap-x-3 px-8 py-6 border-t border-slate-200 bg-slate-50">
            <x-ui.button type="button" variant="ghost" @click="$dispatch('close-slide-panel','expense-create')">Anulează</x-ui.button>
            <x-ui.button type="submit" form="expense-create-form-dashboard" variant="default">Salvează cheltuială</x-ui.button>
        </div>
    </x-slide-panel>
</x-app-layout>
